var v=(h,u,s)=>new Promise((r,a)=>{var l=n=>{try{m(s.next(n))}catch(c){a(c)}},i=n=>{try{m(s.throw(n))}catch(c){a(c)}},m=n=>n.done?r(n.value):Promise.resolve(n.value).then(l,i);m((s=s.apply(h,u)).next())});import{c as k,u as y,T as C,d as N,$ as e,g as B,s as p,h as A}from"./bootstrap-eRMf25wG.js";import{a3 as _,W as x,J as V,ad as $,aj as F,m as b,af as T,ag as w,a9 as o,b1 as I,ap as P,am as g,aw as d,O as R,ae as L,b as S}from"../jse/index-index-QIcGCnph.js";const q={class:"mt-4 text-center text-sm"},D=_({name:"RegisterForm",__name:"register",props:{formSchema:{default:()=>[]},loading:{type:Boolean,default:!1},loginPath:{default:"/auth/login"},title:{default:""},subTitle:{default:""},submitButtonText:{default:""}},emits:["submit"],setup(h,{expose:u,emit:s}){const r=h,a=s,[l,i]=k(x({commonConfig:{hideLabel:!0,hideRequiredMark:!0},schema:V(()=>r.formSchema),showDefaultActions:!1})),m=y();function n(){return v(this,null,function*(){const{valid:t}=yield i.validate(),f=yield i.getValues();t&&a("submit",f)})}function c(){m.push(r.loginPath)}return u({getFormApi:()=>i}),(t,f)=>($(),F("div",null,[b(C,null,{desc:T(()=>[w(t.$slots,"subTitle",{},()=>[g(d(t.subTitle||o(e)("authentication.signUpSubtitle")),1)])]),default:T(()=>[w(t.$slots,"title",{},()=>[g(d(t.title||o(e)("authentication.createAnAccount"))+" ðŸš€ ",1)])]),_:3}),b(o(l)),b(o(N),{class:I([{"cursor-wait":t.loading},"mt-2 w-full"]),loading:t.loading,"aria-label":"register",onClick:n},{default:T(()=>[w(t.$slots,"submitButtonText",{},()=>[g(d(t.submitButtonText||o(e)("authentication.signUp")),1)])]),_:3},8,["class","loading"]),P("div",q,[g(d(o(e)("authentication.alreadyHaveAccount"))+" ",1),P("span",{class:"vben-link text-sm font-normal",onClick:f[0]||(f[0]=U=>c())},d(o(e)("authentication.goToLogin")),1)])]))}}),H=_({name:"Register",__name:"register",setup(h){const u=B(),s=R(!1),r=V(()=>[{component:"VbenInput",componentProps:{placeholder:e("authentication.nameTip")},fieldName:"name",label:e("authentication.name"),rules:p().min(2,{message:e("authentication.nameTip")})},{component:"VbenInput",componentProps:{placeholder:e("authentication.usernameTip")},fieldName:"username",label:e("authentication.username"),rules:p().min(4,{message:e("authentication.usernameTip")})},{component:"VbenInputPassword",componentProps:{passwordStrength:!0,placeholder:e("authentication.password")},fieldName:"password",label:e("authentication.password"),rules:p().min(8,{message:e("authentication.passwordStrength")})},{component:"VbenInputPassword",componentProps:{placeholder:e("authentication.confirmPassword")},dependencies:{rules(a){const{password:l}=a;return p({required_error:e("authentication.passwordTip")}).min(8,{message:e("authentication.passwordTip")}).refine(i=>i===l,{message:e("authentication.confirmPasswordTip")})},triggerFields:["password"]},fieldName:"confirm_password",label:e("authentication.confirmPassword")},{component:"VbenInput",componentProps:{placeholder:e("authentication.emailTip")},fieldName:"email",label:e("authentication.email"),rules:p().email({message:e("authentication.emailTip")})},{component:"VbenCheckbox",fieldName:"agree_policy",renderComponentContent:()=>({default:()=>S("span",[e("authentication.agree"),S("a",{class:"vben-link ml-1 ",href:""},`${e("authentication.privacyPolicy")} & ${e("authentication.terms")}`)])}),rules:A().refine(a=>!!a,{message:e("authentication.agreeTip")})}]);return(a,l)=>($(),L(o(D),{"form-schema":r.value,loading:s.value,onSubmit:o(u).register},null,8,["form-schema","loading","onSubmit"]))}});export{H as default};
