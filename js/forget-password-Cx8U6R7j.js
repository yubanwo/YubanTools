var v=(d,u,o)=>new Promise((s,n)=>{var m=e=>{try{i(o.next(e))}catch(c){n(c)}},r=e=>{try{i(o.throw(e))}catch(c){n(c)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(m,r);i((o=o.apply(d,u)).next())});import{c as B,u as $,T as x,d as k,$ as a,r as C,e as V,s as y}from"./bootstrap-eRMf25wG.js";import{a3 as P,W as R,J as S,ad as _,aj as F,m as p,af as g,ag as w,a9 as l,ap as A,b1 as D,am as h,aw as b,O as T,ae as L}from"../jse/index-index-QIcGCnph.js";const N=P({name:"ForgetPassword",__name:"forget-password",props:{formSchema:{},loading:{type:Boolean,default:!1},loginPath:{default:"/auth/login"},title:{default:""},subTitle:{default:""},submitButtonText:{default:""}},emits:["submit"],setup(d,{expose:u,emit:o}){const s=d,n=o,[m,r]=B(R({commonConfig:{hideLabel:!0,hideRequiredMark:!0},schema:S(()=>s.formSchema),showDefaultActions:!1})),i=$();function e(){return v(this,null,function*(){const{valid:t}=yield r.validate(),f=yield r.getValues();t&&n("submit",f)})}function c(){i.push(s.loginPath)}return u({getFormApi:()=>r}),(t,f)=>(_(),F("div",null,[p(x,null,{desc:g(()=>[w(t.$slots,"subTitle",{},()=>[h(b(t.subTitle||l(a)("authentication.forgetPasswordSubtitle")),1)])]),default:g(()=>[w(t.$slots,"title",{},()=>[h(b(t.title||l(a)("authentication.forgetPassword"))+" 🤦🏻‍♂️ ",1)])]),_:3}),p(l(m)),A("div",null,[p(l(k),{class:D([{"cursor-wait":t.loading},"mt-2 w-full"]),loading:t.loading,"aria-label":"submit",onClick:e},{default:g(()=>[w(t.$slots,"submitButtonText",{},()=>[h(b(t.submitButtonText||l(a)("authentication.sendResetLink")),1)])]),_:3},8,["class","loading"]),p(l(k),{class:"mt-4 w-full",variant:"outline",onClick:f[0]||(f[0]=q=>c())},{default:g(()=>[h(b(l(a)("common.back")),1)]),_:1})])]))}}),z=P({name:"ForgetPassword",__name:"forget-password",setup(d){const u=T(!1),o=S(()=>[{component:"VbenInput",componentProps:{placeholder:"example@example.com"},fieldName:"email",label:a("authentication.email"),rules:y().min(1,{message:a("authentication.emailTip")}).email(a("authentication.emailValidErrorTip"))}]),s=T(0),n=T(!1);function m(i){return v(this,null,function*(){yield C(i),V.success({duration:3,description:a("authentication.requestResetPasswordSuccessDesc"),message:void 0}),s.value=60,n.value=!0,u.value=!0;const e=setInterval(()=>{s.value--,s.value<=0&&(clearInterval(e),n.value=!1,u.value=!1)},1e3)})}const r=S(()=>n.value?a("authentication.sendText",[s.value]):a("authentication.sendResetLink"));return(i,e)=>(_(),L(l(N),{"form-schema":o.value,loading:u.value,"submit-button-text":r.value,onSubmit:m},null,8,["form-schema","loading","submit-button-text"]))}});export{z as default};
